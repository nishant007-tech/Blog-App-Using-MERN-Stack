{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/nishant/Node JS Tut/auth-using-nodejs-reactjs/client/src/components/yourPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // import img from '../static/images/rana.jpg';\n\nimport axios from 'axios';\nimport DefaultImage from '../static/images/default-user.png';\nimport Default from '../static/images/defaultimage.jpeg';\n\nfunction YourPost() {\n  _s();\n\n  const [postDetail, setPostDetails] = useState({\n    posts: []\n  });\n  const [currentUser, setCurrentuser] = useState();\n  const [userphoto, setPhoto] = useState({\n    photo: '',\n    name: ''\n  });\n  useEffect(() => {\n    async function fetchUser() {\n      try {\n        let token = JSON.parse(localStorage.getItem('token'));\n        const response = await axios.get('/api/user/getpost', {\n          headers: {\n            \"x-auth-token\": token\n          }\n        });\n        const res = await axios.get('/api/user/profile', {\n          headers: {\n            \"x-auth-token\": token\n          }\n        }); // console.log(response.data);\n\n        setCurrentuser(res.data.user._id);\n        setPhoto({\n          photo: res.data.user.photo,\n          name: res.data.user.name\n        });\n        setPostDetails({\n          posts: response.data.post\n        }); // console.log(postDetail);\n      } catch (err) {\n        console.log(err.data);\n      }\n    }\n\n    fetchUser();\n  }, []);\n\n  const deletePostHandler = async postId => {\n    await axios.delete(`/api/user/deletepost/${postId}`);\n    window.location.reload();\n  }; //like and dislike handlers\n\n\n  const likeHandler = async postId => {\n    try {\n      let token = JSON.parse(localStorage.getItem('token'));\n      let response = await axios.put('/api/user/likes', {\n        id: postId\n      }, {\n        headers: {\n          \"x-auth-token\": token\n        }\n      }); //this is for re-render, we actually dont need that\n\n      const newData = postDetail.posts.map(data => {\n        if (data._id === response.data._id) {\n          return response.data;\n        } else {\n          return data;\n        }\n      });\n      setPostDetails({\n        posts: newData\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const dislikeHandler = async postId => {\n    try {\n      let token = JSON.parse(localStorage.getItem('token'));\n      let response = await axios.put('/api/user/dislikes', {\n        id: postId\n      }, {\n        headers: {\n          \"x-auth-token\": token\n        }\n      });\n      const newData = postDetail.posts.map(data => {\n        if (data._id === response.data._id) {\n          return response.data;\n        } else {\n          return data;\n        }\n      });\n      setPostDetails({\n        posts: newData\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  if (userphoto.photo) {\n    var profilepic = userphoto.photo;\n  } else {\n    profilepic = DefaultImage;\n  } //return Statements\n\n\n  if (postDetail.posts.length > 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"myPost-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"headPost\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"My \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge\",\n            children: \"Blog Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), postDetail.posts.map((data, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog-cards\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"HeaderContent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: profilepic,\n              alt: \"UserIMG\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [userphoto.name, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            id: \"Date\",\n            children: [\" \", data.date, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: data.postimage ? data.postimage : Default,\n            alt: \"PostIMG\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\" \", data.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: data.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            id: \"hr2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icons\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [data.likes.includes(currentUser) ? /*#__PURE__*/_jsxDEV(\"i\", {\n                onClick: () => dislikeHandler(data._id),\n                id: \"heart\",\n                className: \"fa fa-heart redheart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 45\n              }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                onClick: () => likeHandler(data._id),\n                id: \"heart\",\n                className: \"fa fa-heart-o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                id: \"showlikes\",\n                children: data.likes.length > 1 ? `${data.likes.length} Likes` : `${data.likes.length} Like`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              id: \"trash\",\n              onClick: () => deletePostHandler(data._id),\n              className: \"fa fa-trash-o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 29\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"myPost-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"headPost\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"My \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge\",\n            children: \"Blog Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"blog-cards\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog-content\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"You Haven't Created Any Blog Post Yet!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(YourPost, \"QYS54StNc3YoJpoQ9WKtX142XDs=\");\n\n_c = YourPost;\nexport default YourPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"YourPost\");","map":{"version":3,"sources":["/home/nishant/Node JS Tut/auth-using-nodejs-reactjs/client/src/components/yourPost.js"],"names":["React","useEffect","useState","axios","DefaultImage","Default","YourPost","postDetail","setPostDetails","posts","currentUser","setCurrentuser","userphoto","setPhoto","photo","name","fetchUser","token","JSON","parse","localStorage","getItem","response","get","headers","res","data","user","_id","post","err","console","log","deletePostHandler","postId","delete","window","location","reload","likeHandler","put","id","newData","map","error","dislikeHandler","profilepic","length","index","date","postimage","title","description","likes","includes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n// import img from '../static/images/rana.jpg';\nimport axios from 'axios';\nimport DefaultImage from '../static/images/default-user.png';\nimport Default from '../static/images/defaultimage.jpeg';\n\n\nfunction YourPost() {\n    const [postDetail, setPostDetails] = useState({\n        posts: []\n    })\n    const [currentUser, setCurrentuser] = useState();\n\n\n    const [userphoto, setPhoto] = useState({\n        photo: '',\n        name: ''\n    })\n    useEffect(() => {\n        async function fetchUser() {\n            try {\n                let token = JSON.parse(localStorage.getItem('token'));\n                const response = await axios.get('/api/user/getpost',\n                    {\n                        headers: {\n                            \"x-auth-token\": token,\n\n                        }\n                    }\n                );\n                const res = await axios.get('/api/user/profile',\n                    {\n                        headers: {\n                            \"x-auth-token\": token,\n\n                        }\n                    }\n                );\n                // console.log(response.data);\n                setCurrentuser(res.data.user._id);\n                setPhoto({\n                    photo: res.data.user.photo,\n                    name: res.data.user.name\n                });\n                setPostDetails({\n                    posts: response.data.post\n                }\n                );\n                // console.log(postDetail);\n            } catch (err) {\n                console.log(err.data);\n            }\n        }\n        fetchUser();\n\n    }, [])\n\n    const deletePostHandler = async (postId) => {\n        await axios.delete(`/api/user/deletepost/${postId}`);\n        window.location.reload();\n    }\n    //like and dislike handlers\n    const likeHandler = async (postId) => {\n        try {\n            let token = JSON.parse(localStorage.getItem('token'));\n            let response = await axios.put('/api/user/likes', { id: postId },\n                { headers: { \"x-auth-token\": token } }\n            );\n            //this is for re-render, we actually dont need that\n            const newData = postDetail.posts.map((data) => {\n                if (data._id === response.data._id) {\n                    return response.data\n                } else {\n                    return data\n                }\n            })\n            setPostDetails({\n                posts: newData\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    const dislikeHandler = async (postId) => {\n        try {\n            let token = JSON.parse(localStorage.getItem('token'));\n            let response = await axios.put('/api/user/dislikes', { id: postId },\n                { headers: { \"x-auth-token\": token } }\n            );\n            const newData = postDetail.posts.map((data) => {\n                if (data._id === response.data._id) {\n                    return response.data\n                } else {\n                    return data\n                }\n            })\n            setPostDetails({\n                posts: newData\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n\n    if (userphoto.photo) {\n        var profilepic = userphoto.photo;\n    } else {\n        profilepic = DefaultImage;\n    }\n\n    //return Statements\n    if (postDetail.posts.length > 0) {\n        return (\n            <div className=\"myPost-container\">\n                <div className=\"headPost\">\n                    <h2>My <span className=\"badge\">Blog Posts</span></h2>\n                    <hr></hr>\n                </div>\n\n                {\n                    postDetail.posts.map((data, index) => (\n\n                        <div key={index} className=\"blog-cards\">\n                            <div className=\"HeaderContent\">\n                                <div>\n                                    <img\n                                        src={profilepic}\n                                        alt=\"UserIMG\"\n                                    />\n                                    <span>{userphoto.name} </span>\n                                </div>\n                                <strong id=\"Date\"> {data.date} </strong>\n                                {/* <p id=\"Date\"> {Date(data.date)} </p> */}\n                            </div>\n\n                            <div className=\"image\">\n                                <img\n                                    src={data.postimage ? data.postimage : Default}\n                                    alt=\"PostIMG\"\n                                />\n                            </div>\n\n                            <div className=\"blog-content\">\n                                <b> {data.title}</b>\n                                <p>{data.description}</p>\n                                <hr id=\"hr2\"></hr>\n                                <div className=\"icons\">\n                                    <div>\n                                        {data.likes.includes(currentUser)\n                                            ?\n                                            <i onClick={() => dislikeHandler(data._id)} id=\"heart\" className=\"fa fa-heart redheart\"></i>\n                                            :\n                                            <i onClick={() => likeHandler(data._id)} id=\"heart\" className=\"fa fa-heart-o\"></i>\n                                        }\n\n                                        <i id=\"showlikes\">\n                                            {data.likes.length > 1\n                                                ?\n                                                `${data.likes.length} Likes`\n                                                :\n                                                `${data.likes.length} Like`\n                                            }\n                                        </i>\n                                    </div>\n                                    <i id=\"trash\" onClick={() => deletePostHandler(data._id)} className=\"fa fa-trash-o\"></i>\n                                </div>\n\n                            </div>\n                        </div>\n                    ))\n                }\n\n            </div>\n        );\n    }\n    else {\n        return (\n            <div className=\"myPost-container\">\n                <div className=\"headPost\">\n                    <h2>My <span className=\"badge\">Blog Posts</span></h2>\n                    <hr></hr>\n                </div>\n                <div className=\"blog-cards\">\n                    <div className=\"blog-content\">\n                        <b>You Haven't Created Any Blog Post Yet!</b>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nexport default YourPost;"]},"metadata":{},"sourceType":"module"}